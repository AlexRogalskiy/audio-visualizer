import"./index.1dd16ad5.js";import{r,u as p,j as h,a as n,b as v,E as g,c as y,B as w}from"./ErrorBoundary.574e26e7.js";function x({deviceId:d}){const[c,i]=r.exports.useState(null),o=r.exports.useRef(),e=p("audio"),[s,f]=r.exports.useState(null);return r.exports.useEffect(()=>{async function a(){const t=await navigator.mediaDevices.getUserMedia({audio:{deviceId:d},video:!1}),l=t.getAudioTracks()[0];l!=null&&l.label&&f({name:l.label});const u=new window.AudioContext,m=new window.AnalyserNode(u,{minDecibels:-90,maxDecibels:-10,smoothingTimeConstant:.85});m.fftSize=32,u.createMediaStreamSource(t).connect(m,0),i(m)}return a(),()=>{i(null),f(null)}},[d]),r.exports.useEffect(()=>{if(!c)return;const a=c.frequencyBinCount;return o.current=setInterval(()=>{if(!e.current)return;const t=new Uint8Array(a);c.getByteFrequencyData(t),e.current.postMessage(t)},5),()=>{clearInterval(o.current)}},[c,e]),h("div",{children:[s?h("p",{children:["Playing from audio source ",n("code",{children:s.name}),"."]}):null,n("button",{onClick:()=>{clearInterval(o.current)},style:{display:"block"},children:"Stop Interval"})]})}function b(){const[d,c]=r.exports.useState([]),[i,o]=r.exports.useState(null);return r.exports.useEffect(()=>{async function e(){const s=await navigator.mediaDevices.enumerateDevices();c(s.filter(f=>f.kind==="audioinput"))}e()},[]),r.exports.useEffect(()=>{async function e(){const s=await navigator.mediaDevices.getUserMedia({audio:!0});o(s.id)}i||e()},[i]),h("div",{children:[n("h2",{children:"Audio Input Devices"}),n("p",{children:"Select an input device. If device names aren't showing up, please allow microphone/audio access in your browser, and mark it to remember your decision or always allow, and then reload the page."}),n("ul",{children:d.map(e=>n("li",{children:n("button",{onClick:()=>o(e.deviceId),"aria-pressed":e.deviceId===i,children:e.label||`Unknown device ${e.deviceId}`.trim()})},e.deviceId))}),i?n(x,{deviceId:i}):null]})}function C(){const d=p("control"),c=v("control"),[i,o]=r.exports.useState([]);return r.exports.useEffect(()=>{const e=d.current;if(!e)return;const s=f=>{o(a=>{const t=f.data;switch(t.name){case"register":return a.concat([t.data]);case"unregister":return a.filter(l=>l.id!==t.data.id);case"ping":return a.find(u=>u.id===t.data.id)?a.map(u=>u.id===t.data.id?t.data:u):a.concat([t.data]);default:return a}})};return e.addEventListener("message",s),()=>{e.removeEventListener("message",s)}},[d]),h("div",{children:[n("h1",{children:"Control"}),n("p",{children:n("code",{children:c})}),n("h2",{children:"Active Views"}),n("ul",{children:i.map(e=>h("li",{children:[e.type," - ",e.id]},e.id))}),n(g,{children:n(b,{})})]})}y(document.getElementById("root")).render(n(r.exports.StrictMode,{children:n(w,{children:n(g,{children:n(C,{})})})}));
